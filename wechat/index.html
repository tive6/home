<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="keywords" content="八斗金服">
  <meta name="description" content="八斗金服">
  <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
  />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="format-detection" content="telephone=no" />
  <!--<base href="http://192.168.0.220:8022/" />-->
  <title>智享计划</title>
  <link rel="stylesheet" type="text/css" href="weixin/css/swiper/3.3.1/swiper.min.css" />
  <link rel="stylesheet" type="text/css" href="weixin/css/wechat.css" />
  <script src="weixin/js/require.js" data-main="weixin/js/main" defer="defer" async="async" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript">
    window.onload = function () {
      require.config({
        baseUrl: 'weixin/js',
        paths: {
          'jquery': [
            '//cdn.bootcss.com/jquery/1.12.4/jquery.min',
            'lib/jquery/1.12.4/jquery.min'
          ],
          'config': 'settings',
          'AsyncTaskManager': 'common/asyncTaskManager',
          'investController': 'controller/investController',
          'userController': 'controller/userController',
          'appController': 'controller/appController'
        }
      });
      require([
        'jquery', 'config', 'AsyncTaskManager', 'investController', 'userController', 'appController'
      ], function ($, config, AsyncTaskManager, investController, userController, appController) {
        var loadedMark = false,
          loaded = false;

        try {
          var atm = AsyncTaskManager.of()
            .addTask(investController.isHaveBooked)
            .addTask(investController.getInvestInfo)
            .every(function (res) {
              var hasBooked = res[0],
                info = res[1];
              if (typeof res[1] === 'boolean') {
                hasBooked = res[1];
                info = res[0]
              }
              $('#loading').hide(0);
              $('#loaded').show(0);
              var timer = setTimeout(function () {
                clearTimeout(timer);
                if (hasBooked) {
                  $('#indicatorTitle').html('增持计划');
                } else {
                  $('#indicatorTitle').html('立即预约');
                }
                $('#rate').html(info.getRate());
                if (info.getBuyNum() < 50) {
                  $('#startUpMoney').show();
                } else {
                   $('#startUpMoney').hide();
                   $('#peopleNum').show();
                   $('#buyNum').html(info.getBuyNum() + '人');
                }
                $('#invest_now').on('click', function () {
                  if (userController.isLogin()) {
                    window.location = config.BASE_URL + config.PAGE_URI_MAP.INVEST_PAGE;
                  }
                });
              }, 1400);
              // $('#indicator').hide();
            });
        } catch (error) {
          // alert(error)
        }
        appController.isExsitWaitTakeRedPacket(function(isExist){
          // console.log(isExist)
          if(isExist){
            $('.red-packet').fadeIn(360);
          }
        });
        $('#loaded')[0].addEventListener("webkitAnimationEnd", function () {
          $('#loadedMark').show(0);
        }, false);
      });
    };
  </script>
</head>

<body class="soldout-page gray-bg">
  <div class="soldout-page-wrapper scroll-wrapper">
    <div class="scroll-content">
      <div class="swiper-container header-gradient-bg">
        <div id="bid_list_wrapper" class="swiper-wrapper" style="display: block;">
          <div class="header-gradient-bg">
            <header class="rate-header">
              <div class="rate-wrapper">
                <div class="rate-content">
                  <div class="rate-content-inner">
                    <h1 class="rate"><span id="rate" class="rate-number">0.0</span><span class="per-cent">%
                    <img src="weixin/images/ascend_3x.png" alt="" /></span></h1>
                    <p>历史年化收益率</p>
                  </div>
                </div>
              </div>
            </header>
          </div>
        </div>
        <!--<div class="swiper-arrow-prev"></div>
        <div class="swiper-arrow-next"></div>-->
      </div>
      <section class="advantage">
        <div class="table-wrapper">
          <div class="table-cell">
            <span class="adv-icon secrity-icon"></span>
            <h2>多重保障<small>投资无忧</small></h2>
          </div>
          <div class="table-cell">
            <span class="adv-icon fast-icon"></span>
            <h2>专享福利<small>预约贴息</small></h2>
          </div>
          <div id="peopleNum" class="table-cell" style="display: none;">
            <span class="adv-icon investment-amount-icon"></span>
            <h2>预约人数<small id="buyNum">...人</small></h2>
          </div>
          <div id="startUpMoney" class="table-cell">
            <span class="adv-icon purchase-count-icon"></span>
            <h2>起投金额<small>100元</small></h2>
          </div>
        </div>
      </section>
      <div class="btn-group" style="margin-bottom: 45px;">
        <button id="invest_now" class="btn btn-primary">
          <svg id="indicator" class="indicator-wrapper" viewbox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <circle id="loading" class="indicator-animate" cx="10" cy="10" r="8" fill="transparent" stroke="#fff" stroke-width="1" class="frozeed-assets-circle"
              stroke-dashoffset="7.7654816" stroke-dasharray="42.5 7.7654816"></circle>
            <circle id="loaded" class="indicator-animate-loaded" cx="10" cy="10" r="8" fill="transparent" stroke="#fff" stroke-width="1" class="frozeed-assets-circle"
              stroke-linecap="round" stroke-dashoffset="0" stroke-dasharray="42.5 7.7654816">
            </circle>
            <polyline id="loadedMark" class="indicator-animate-loaded-mark" points="5.8,8.8 10,13.5 18,5" stroke-linecap="round" fill="transparent" stroke="#fff"
              stroke-width="1" stroke-dasharray="0 17.9979633" />
          </svg>
          <span id="indicatorTitle" class="indicator-title">数据加载中...</span></button>
        <p style="font-size: 12px;color: #989898;">预约成功进入等待期的资金，平台将给予贴息补偿</p>
      </div>
    </div>
  </div>
  <!--领红包-->
  <a href="/receive-red-packet.html">
    <img style="display:none" class="red-packet" src="weixin/images/activity/red-packet@2x.png" alt="" />
  </a>
  <div class="footer-bar">
    <nav id="navigation" class="footer-nav">
      <div class="footer-nav-item curr-item">
        <a href="/"><span class="footer-nav-icon nav-icon-01"></span></a>
      </div>
      <div class="footer-nav-item">
        <a href="/focus.html"><span class="footer-nav-icon nav-icon-02"></span></a>
      </div>
      <div class="footer-nav-item">
        <a href="/account-center.html"><span class="footer-nav-icon nav-icon-03"></span></a>
      </div>
    </nav>
  </div>
</body>

</html>