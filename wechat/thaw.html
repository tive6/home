<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="keywords" content="八斗金服">
  <meta name="description" content="八斗金服">
  <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="format-detection" content="telephone=no" />
  <title>智享预约</title>
  <link rel="stylesheet" type="text/css" href="weixin/css/wechat.css" />
  <script src="weixin/js/require.js" data-main="weixin/js/main" defer="defer" async="async" type="text/javascript" charset="utf-8"></script>
  <script>
    window.onload = function() {
      require.config({
        baseUrl: 'weixin/js',
        paths: {
          // 外部库／插件
          'jquery': [
            '//cdn.bootcss.com/jquery/1.12.4/jquery.min',
            'lib/jquery/1.12.4/jquery.min'
          ],
          'config': 'settings',
          'util': 'common/util',
          'swipeLoader': 'common/swipeLoader',
          'appController': 'controller/appController'
        }
      });
      require([
        'jquery', 'config', 'util', 'swipeLoader', 'appController'
      ], function($, config, util, swipeLoader, appController) {
        var options = {
          atuoboodid: util.getSearchField('id')
        };
        appController.getNoticeDetail(options, function(result) {
          var list = result[0].detailMessage;
          var html = '',
            cont = '';

					var lockperiod = result[0].baseMessage.lockperiod,
						operatype = '',
						yieldRate = result[0].baseMessage.rate;
					if(lockperiod == 0) {
						lockperiod = '无锁定期';
					} else if(lockperiod>=1&&lockperiod<=3) {
						lockperiod = '1~3个月';
					} else if(lockperiod>3&&lockperiod<=6) {
						lockperiod = '3~6个月';
					} else if(lockperiod>6&&lockperiod<=12) {
						lockperiod = '6~12个月';
					}

					html +=
						'<div class="plan-list-outer plan-list-cont clear">' +
						'<span class="dot-bottom clear">' + result[0].baseMessage.dateStr + ' 预约成功</span>' +
						'<div class="plan-list-inner">' +
						'<div class="plan-inner-detail clear">' +
						'<p>预约金额：' + result[0].baseMessage.money + '元</p>' +
						'<p>历史年化收益率：' + yieldRate + '%</p>' +
						'<p>锁定期：' + lockperiod + '</p>' +
						'</div>' +
						'<a href="#" class="read-more"></a>' +
						'</div>' +
						'</div>';
						$.each(list, function(index, list) {
							if(list.operatype == 1) {
								operatype = " 撮合成功";
								cont = '<p>已匹配：' + list.matchedmoney + '元</p>' +
									'<p>未匹配：' + list.enmatchedmoney + '元</p>';
							} else if(list.operatype == 2) {
								operatype = " 撮合完成";
								cont = '<p>已匹配：' + list.matchedmoney + '元</p>' +
									'<p>未匹配：' + list.enmatchedmoney + '元</p>';
							} else if(list.operatype == 3) {
								operatype = " 解冻成功";
								cont = '<p>已匹配：' + list.matchedmoney + '元</p>' +
									'<p>未匹配：' + list.enmatchedmoney + '元</p>' +
									'<p>解冻金额：' + list.unfreezemoney + '元</p>';
							} else if(list.operatype == 4) {
								operatype = " 本息赎回";
								cont = '<p>锁定期结束后1-3天</p><p>本息将转入到您的可用余额中</p>';
							}
	
							html +=
								'<div class="plan-list-outer plan-list-cont clearfix">' +
								'<span class="dot-bottom clear">' + list.matchtimeStr + operatype + '</span>' +
								'<div class="plan-list-inner">' +
								'<div class="plan-inner-detail clearfix">' + cont + '</div></div></div>';
						});
								$('#thaw-wrapper').append(html);
						});

				});
			};
		</script>
	</head>

	<body class="thaw-page gray-bg">
		<div class="thaw-wrapper" style="padding-top: 30px;">
	    <div id="thaw-wrapper"></div>
	  </div>
</body>
</html>