<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="keywords" content="八斗金服">
  <meta name="description" content="八斗金服">
  <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalabel=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="format-detection" content="telephone=no" />
  <title>收益计算器</title>
  <link rel="stylesheet" type="text/css" href="weixin/css/wechat.css" />
  <script src="weixin/js/require.js" data-main="weixin/js/main" defer="defer" async="async" type="text/javascript" charset="utf-8"></script>
  <script>
    window.onload = function() {
      require.config({
        baseUrl: 'weixin/js',
        paths: {
          'jquery': [
            '//cdn.bootcss.com/jquery/1.12.4/jquery.min',
            'lib/jquery/1.12.4/jquery.min'
          ],
          'config': 'settings',
          'util': 'common/util',
          'appController': 'controller/appController'
        }
      });
      require([
        'jquery', 'config', 'util', 'appController'
      ], function($, config, util, appController) {
        var now = new Date(),
          dateStr = '';
        dateStr += now.getFullYear() + '-';
        dateStr += now.getMonth() < 9 ? '0' + (now.getMonth() + 1) : now.getMonth() + 1;
        dateStr += '-' + now.getDate();
        $('#caculate').on('click', caculate);
        $('[name="dateOfValue"]').val(dateStr);

        function caculate() {
          var opts = {
            money: $('[name="money"]').val() || 0,
            method: $('[name="method"]').val(),
            annualRate: $('[name="annualRate"]').val() || 0,
            period: $('[name="period"]').val() || 0,
            dateOfValue: $('[name="dateOfValue"]').val() || new Date()
          };
          appController.caculate(opts, function(res) {
            var html = '';
            if (res) {
              $.each(res.list, function(idx, item) {
                html += '<div class="plan-list"><h2>第' + item.periods + '期回款(<span>' + item.date + '</span>)</h2><ul class="clearfix"><li><span>' + item.monthCountAmount + '</span>回款金额(元)</li><li><span>' + item.monthCapital + '</span>应收本金(元)</li><li><span>' + item.monthInterest + '</span>应收利息(元)</li></ul></div>';
              });
              $('#investEarned').html(res.sumEarn);
              $('#sumEarned').html(res.sumMoney);
              $('#profitList').html(html);
              $('#profitContainer').fadeIn(300);
            }
          });
        }
        $('.profit-close').on('click', function() {
          $('#profitContainer').fadeOut(300);
        });
        $('.profit-investment').on('click', function() {
          try {
            window.history.go(-1);
          } catch (error) {
            window.location = config.BASE_URL + config.PAGE_URI_MAP.INVEST_PAGE;
          }
        })
      });
    };
  </script>
</head>

<body class="calculator-page gray-bg">
  <form action="">
    <div class="calculator-wrapper" style="padding:37px 0;background:#fff;">
      <div class="calculator-div"><label>投资金额</label>
        <input type="number" name="money" value="" /><span>元</span></div>
      <div class="calculator-div"><label>还款方式</label>
        <select name="method">
					<option value="等本等息">等本等息</option>
					<option value="按月付息到期还本">按月付息到期还本</option>
					<option value="一次性还本付息">一次性还本付息</option>
				</select>
        <span class="calculator-select"></span>
      </div>
      <div class="calculator-div"><label>年化率</label>
        <input type="number" name="annualRate" value="" /><span>%</span></div>
      <div class="calculator-div"><label>投资期限</label>
        <input id="date-icon" type="number" name="period" />
        <span>月</span>
      </div>
      <div class="calculator-div"><label>计息日期</label>
        <input id="date-icon" type="date" name="dateOfValue" /><span id="date-cont" class="calculator-rili"></span></div>
    </div>
    <div class="btn-group">
      <button id="caculate" type="button" class="btn btn-primary">计算</button>
      <button type="reset" class="btn reset-btn">重置</button>
    </div>
  </form>
  <div id="profitContainer" style="display: none;width:100%;height:100%">
    <div class="profit-page-wrapper scroll-wrapper gray-bg">
      <div class="table-wrapper transfer-tab">
        <div class="table-cell table-bor">
          <p class="invest-table-lable">利息收益(元)</p>
          <p id="investEarned" class="money">0.00</p>
        </div>
        <div class="table-cell">
          <p class="invest-table-lable">本息合计(元)</p>
          <p id="sumEarned" class="money">0.00</p>
        </div>
      </div>
      <div id="profitList" class="profit-list">
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
        <div class="plan-list">
          <h2>第001期回款(<span>2016-12-12</span>)</h2>
          <ul class="clearfix">
            <li><span>100.00</span>回款金额(元)</li>
            <li><span>100.00</span>应收本金(元)</li>
            <li><span>10.00</span>应收利息(元)</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="profit-footer footer-bar">
      <button class="profit-close">关闭</button><button class="profit-investment">前往投资</button>
    </div>
  </div>
</body>

</html>