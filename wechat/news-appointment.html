<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="keywords" content="八斗金服">
  <meta name="description" content="八斗金服">
  <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="format-detection" content="telephone=no" />
  <title>智享预约</title>
  <link rel="stylesheet" type="text/css" href="weixin/css/wechat.css" />
  <script src="weixin/js/require.js" data-main="weixin/js/main" defer="defer" async="async" type="text/javascript" charset="utf-8"></script>
  <script>
    window.onload = function() {
      require.config({
        baseUrl: 'weixin/js',
        paths: {
          // 外部库／插件
          'jquery': [
            '//cdn.bootcss.com/jquery/1.12.4/jquery.min',
            'lib/jquery/1.12.4/jquery.min'
          ],
          'config': 'settings',
          'swipeLoader': 'common/swipeLoader',
          'appController': 'controller/appController'
        }
      });
      require([
        'jquery', 'config', 'swipeLoader', 'appController'
      ], function($, config, swipeLoader, appController) {

        var dataCount = 0,
          currentPage = 0,
          noMoreData = false;

        function loadMore(callback, swiper) {
          if (noMoreData) {
            return;
          }
          var options = {
            currentPage: currentPage++,
            pageSize: 10
          };
          appController.getNotice(options, function(result) {
            var list = result;
            
            if (list && list.length > 0) {
              dataCount += list;
              var html = '';
              $.each(list, function(index, list) {
                //您在2017年3月6日预约了一笔3000的元智享计划，已匹配1000元，未匹配2000元，解冻金额0.00元。
                html +=
                  '<div class="myAsset-list" data-id="' + list.id + '" >' +
                  '<div class="myAsset-list-time">' + list.subscribeDateStr + '</div>' +
                  '<div class="myAsset-list-cont">' +
                  '<h2>智享计划</h2>' +
                  '<p>您在' + list.subscribeStr + '预约了一笔' + list.money + '元的智享计划，已匹配' + list.matched + '元，未匹配' + list.unmatched + '元，解冻金额' + list.thawched + '元。</p>' +
                  '<div class="viewDetails">' +
                  '<span>查看详情</span>' +
                  '<a class="read-more" href="thaw.html?id=' + list.id + '"></a>' +
                  '</div>' +
                  '</div>' +
                  '</div>';
              });
              $('#notice-wrapper').append(html);
              $('#loadMore').one('click', loadMore).fadeIn(600);
            } else {
              noMoreData = true;
              $('#loadMore').html('没有更多消息啦～');
            }
            if (dataCount <= 0) {
              $('body').addClass('no-message');
            }
          });
        };
        loadMore();

      });
    };
  </script>
</head>

<body class="appointment-page gray-bg">
  <div class="appointment-wrapper">

    <!--<div class="myAsset-list">
				<div class="myAsset-list-time">2016.03.03</div>
				<div class="myAsset-list-cont">
					<h2>智享计划</h2>
					<p>您在2017年3月6日预约了一笔3000的元智享计划，已匹配1000元，未匹配2000元，解冻金额0.00元。</p>
					<div class="viewDetails">
						<span>查看详情</span>
						<a class="read-more" href="javascript:void(0);"></a>
					</div>
				</div>
			</div>-->

    <div id="notice-wrapper"></div>
    <div id="loadMore" class="load-more">加载更多</div>
  </div>
  <div class="no-data-msg">暂时还没有消息</div>
</body>

</html>